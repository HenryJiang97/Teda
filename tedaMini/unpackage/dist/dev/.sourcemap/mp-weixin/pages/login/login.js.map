{"version":3,"sources":["webpack:////Users/henryjiang/Documents/Proj/teda/tedaMini/main.js","webpack:////Users/henryjiang/Documents/Proj/teda/tedaMini/pages/login/login.vue","webpack:////Users/henryjiang/Documents/Proj/teda/tedaMini/pages/login/login.vue?12bb","webpack:////Users/henryjiang/Documents/Proj/teda/tedaMini/pages/login/login.vue?ce54","webpack:///../../../../../../Users/henryjiang/Documents/Proj/teda/tedaMini/pages/login/login.vue","webpack:////Users/henryjiang/Documents/Proj/teda/tedaMini/pages/login/login.vue?09d5"],"names":["Page","App"],"mappings":";;;;;;;;;;AAAA;AACA;AACI,iL;AACAA,IAAI,CAAC,+BAAYC,cAAZ,CAAD,CAAJ,C;;;;;;;;;;;;ACHJ;AAAA;AAAA;AAAA;AAAA;AAAoF;AAC3B;AACL;;;AAGpD;AAC6K;AAC7K,gBAAgB,4KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA;AAAA;AAAs+B,CAAgB,65BAAG,EAAC,C;;;;;;;;;;;;ACA1/B;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACcA,yK;AACA;AACA,SADA,qBACA,EADA;AAEA,SAFA,qBAEA,EAFA;AAGA,MAHA,kBAGA;AACA;AACA,GALA;AAMA,gBANA;AAOA;;AAEA,mBAFA,6BAEA;AACA;AACA;AACA,OAFA,EAEA,KAFA,CAEA;AACA;AACA,OAJA;AAKA,KARA;;AAUA,qBAVA,6BAUA,GAVA,EAUA,SAVA,EAUA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,wBAFA;AAGA,yBAHA;;AAKA;AACA;AACA,iBADA,CACA,OADA,EACA;AACA,8BADA,EADA;;AAIA,YAJA,CAIA;AACA;;AAEA;AACA,gCADA;;AAGA,cAHA;AAIA,cAJA,CAIA;AACA;AACA,iCAFA,CAEA;;AAEA,mCAJA,CAIA;;AAEA,WAVA;AAWA,eAXA,CAWA;AACA;AACA,WAbA;AAcA,SArBA;AAsBA,OA/BA;AAgCA,KA/CA;;AAiDA,eAjDA,uBAiDA,CAjDA,EAiDA;AACA;AACA;AACA,2CAHA,CAGA;AACA;;AAEA,qDANA,CAMA;;AAEA;AACA;AACA;;AAEA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA,gBADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA,aAPA;AAQA,iBARA,CAQA;AACA;AACA,aAVA;AAWA;AACA,SAfA;;AAiBA,KA9EA,EAPA,E;;;;;;;;;;;;;ACfA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS,wDAAwD;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,oDAAoD;AAC1E,mBAAmB;AACnB,aAAa;AACb;AACA,0BAA0B,2CAA2C;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/login/login.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=8a45260a&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('8a45260a', component.options)\n    } else {\n      api.reload('8a45260a', component.options)\n    }\n    module.hot.accept(\"./login.vue?vue&type=template&id=8a45260a&\", function () {\n      api.rerender('8a45260a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/henryjiang/Documents/Proj/teda/tedaMini/pages/login/login.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=8a45260a&\"","<template>\n <div class=\"login\" style=\"display: flex; align-items: center; justify-content: center;\">\n  \n  <view class=\"padding flex flex-direction margin-top\">\n   <button open-type=\"getUserInfo\" @getuserinfo=\"getUserInfo\"   class=\"cu-btn cuIcon-weixin bg-gradual-green margin-tb-sm lg \">\n    <text class=\"margin-left-sm text-white\">微信登录</text>\n    </button>\n  </view>\n  \n   \n </div>\n</template>\n\n<script>\nimport Parse from '../../common/parse.js'\nexport default {\n created() {},\n mounted() {},\n data() {\n  return {};\n },\n components: {},\n methods: {\n  \n  connerctMagento(){\n   Parse.Cloud.run('createCustomer').then( r => {\n    console.log('r' + JSON.stringify(r));\n   }).catch( e => {\n    console.log('e' + JSON.stringify(e));\n   })\n  },\n  \n  loginInwithWechat(res, wxProfile) {\n   let that = this;\n   \n   console.log('拿到后台的返回' + res + wxProfile);\n   \n   Parse.Cloud.run('getAccessToken').then(r => {\n    console.log(r);\n\n    let myAuthData = {\n     // 根据具体的类型，决定该字段需要填写哪些参数，比如微信需要填写id（值应当是微信的openid）和access_token\n     id: res.openid,\n     access_token: r\n    };\n    let newUser = new Parse.User();\n    newUser\n     ._linkWith('weapp', {\n      authData: myAuthData\n     })\n     .then(function(user) {\n      console.log('新用户注册成功' + JSON.stringify(user));\n      \n      user.set({\n       wxProfile: wxProfile\n      })\n       .save()\n       .then(r => {\n        console.log('用户信息保存成功' + JSON.stringify(r));\n        uni.navigateBack({}) // 回到之前进来的页面\n        \n        that.connerctMagento() // 同步用户信息到magento\n\n       })\n       .catch(e => {\n        console.log('保存失败' + e);\n       });\n     });\n   });\n  },\n\n  getUserInfo(r) {\n   let that = this;\n   // console.log(r.mp.detail);\n   let wxProfile = r.mp.detail.userInfo; // 等下更新用户信息用\n   console.log('拿到用户信息' + JSON.stringify(r.mp.detail.userInfo));\n   \n   this.$store.commit('setWxProfiles',wxProfile) // 存储用户信息\n\n   let clickLoginRes = r.mp.detail;\n   let encryptedData = clickLoginRes.encryptedData;\n   let iv = clickLoginRes.iv;\n\n   uni.login({\n    success(res) {\n     if (res.code) {\n      Parse.Cloud.run('GetOpenId', res)\n       .then(r => {\n        console.log('最终的结果' + JSON.stringify(r));\n        console.log(r.openid, 6666666666)\n        if (r.openid) {\n         that.loginInwithWechat(r, wxProfile);\n        }\n       })\n       .catch(e => {\n        console.log('报错' + e);\n       });\n     }\n    }\n   });\n  },\n\n }\n \n};\n</script>\n\n</style>","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"login\",\n      staticStyle: {\n        display: \"flex\",\n        \"align-items\": \"center\",\n        \"justify-content\": \"center\"\n      }\n    },\n    [\n      _c(\n        \"view\",\n        { staticClass: \"padding flex flex-direction margin-top\" },\n        [\n          _c(\n            \"button\",\n            {\n              staticClass:\n                \"cu-btn cuIcon-weixin bg-gradual-green margin-tb-sm lg \",\n              attrs: { \"open-type\": \"getUserInfo\", eventid: \"2d8d4fae-0\" },\n              on: { getuserinfo: _vm.getUserInfo }\n            },\n            [\n              _c(\"text\", { staticClass: \"margin-left-sm text-white\" }, [\n                _vm._v(\"微信登录\")\n              ])\n            ]\n          )\n        ],\n        1\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}